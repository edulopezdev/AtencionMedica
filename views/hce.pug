doctype html
html
  head
    title HCE
    link(href="https://cdn.lineicons.com/4.0/lineicons.css", rel="stylesheet")
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css", rel="stylesheet")
    link(href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css", rel="stylesheet")
    link(rel="stylesheet" href="css/hce.css")
    script(src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js")
    script(src="/js/frontHCE.js")
  body
    .container-fluid(style="background-image: url('images/background_modulos.png'); background-size: cover; background-attachment: fixed; min-height: 100vh; padding-top: 20px;")
      .row.justify-content-center
        .col-md-2(style="width: 200px;")
          include sidebar.pug
        .col-md-9
          .bg-light.p-4.rounded(style="margin-bottom: 20px; margin: 15px; opacity: 0.85;")
            .d-flex.align-items-center
              h3(style="margin: 0;") HCE
              .mx-auto
                .d-flex.justify-content-center
                  // Texto de indicación
                  input#search.form-control(type="text" placeholder="Buscar por nombre o DNI" list="pacientes" style="width: 300px; margin-right: 10px;")
                  // Datalist para sugerencias
                  datalist#pacientes
                  // Botón para buscar HCE
                  button#buscarHCE.btn.btn-primary.btn-buscar(type="button") Buscar

            table.table.table-bordered.table-hover(style="margin-top: 20px; width: 100%;")
              thead.bg-dark
                tr
                  th(style="color: white;") Fecha
                  th(style="color: white;") Profesional
                  th(style="color: white;") Alergia
                  th(style="color: white;") Antecedentes
                  th(style="color: white;") Diagnóstico
                  th(style="color: white;") Evolución 
                  th(style="color: white;") Hábito

              tbody#resultados
                if paciente 
                  tr(style="background-color: #E6E6FA;")
                    td(colspan="7")= paciente[0].nombre_paciente || 'Nombre del Paciente No Disponible'
                  each turno in paciente
                    tr
                      td= turno.fecha
                      td= turno.profesional
                      if turno.matricula_medico == matricula
                        td= turno.nombre_alergia || 'N/A'
                        td= turno.descripcion_antecedente || 'N/A'
                        td= turno.resumen_diagnostico
                        td= turno.resumen_evolucion || 'N/A'
                        td= turno.descripcion_habito || 'N/A'
                      else
                        td Privado
                        td Privado
                        td= turno.resumen_diagnostico
                        td Privado
                        td Privado
                else
                  tr
                    td(colspan="7") No se encontraron datos para el paciente
    script.
      window.matricula = !{JSON.stringify(matricula)}
