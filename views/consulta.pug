doctype html
html
  head
    title Formulario de Evolución del Paciente
    link(href="https://cdn.lineicons.com/4.0/lineicons.css", rel="stylesheet")
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css", rel="stylesheet")
    link(rel="stylesheet", href="css/styles.css")
    script(src="/js/frontConsulta.js") // Incluyendo el archivo JS para manejo dinámico de campos adicionales
  body
    .wrapper 
      include sidebar.pug

      .main.p-3
        h1 Consulta actual

        if paciente
          h2 Datos del Paciente

          p Nombre: #{paciente.nombre}
          p Apellido: #{paciente.apellido}
          p DNI: #{paciente.dni_paciente}
          p Teléfono: #{paciente.telefono}
          p Fecha de Nacimiento: #{paciente.fecha}
          p Motivo consulta: #{paciente.motivo_consulta}
          p Hora del turno: #{paciente.hora}
        else
          p No se encontraron datos del paciente.

      // Formulario para la evolución del paciente
      form(action="/submit" method="POST")
        // Campo de evolución del paciente
        label(for="evolucion") Evolución:
        textarea#evolucion(name="evolucion" placeholder="Describir evolución del paciente") 

        // Campo de diagnóstico
        label(for="diagnostico") Diagnóstico:
        textarea#diagnostico(name="diagnostico" placeholder="Ingresar diagnóstico")

        // Campo de alergias con botón para agregar más
        label(for="alergia") Alergias:
        div#alergiasContainer
          input(type="text" name="alergia" placeholder="Ingrese una alergia")
          button(type="button" id="addAlergia") + Agregar otra alergia

        // Campo de antecedentes con fecha de inicio y fin
        label Antecedentes:
        div#antecedentesContainer
          input(type="text" name="antecedentes" placeholder="Ingresar antecedentes")
          label(for="inicioAntecedentes") Inicio:
          input(type="date" name="inicioAntecedentes")
          label(for="finAntecedentes") Fin:
          input(type="date" name="finAntecedentes")

        // Campo de hábitos con fecha de inicio y fin
        label Hábitos:
        div#habitosContainer
          input(type="text" name="habitos" placeholder="Ingresar hábitos")
          label(for="inicioHabitos") Inicio:
          input(type="date" name="inicioHabitos")
          label(for="finHabitos") Fin:
          input(type="date" name="finHabitos")

        // Campo de medicamentos con botón para agregar más
        label Medicamentos:
        div#medicamentosContainer
          input(type="text" name="medicamento[]" placeholder="Ingresar medicamento")
          button(type="button" id="addMedicamento") + Agregar otro medicamento

        // Botón de envío
        button(type="submit") Guardar

    // Incluyendo el archivo JS para manejar el sidebar
    script(src='/js/sidebar.js')
